const card={body:{selector:".card",maxRotateX:"45",maxRotateY:"45",perspective:"1000px"},like:{selector:".card__like",maxZ:"61px"},img:{selector:".card__img",maxZ:"60px"},name:{selector:".card__name",maxZ:"50px"},description:{selector:".card__description",maxZ:"40px"},price:{selector:".card__price",maxZ:"30px"},btn:{selector:".btn-add-card",maxZ:"1px"}},mobileRangeAngel=30,isMobile=window.navigator.maxTouchPoints>0,startDegrees={x:"",y:""};class Card{constructor(e){this.params=e,this.elems={},this.body=e.body.elem,this.getBodyChildren(),this.setElemsStyle()}getBodyChildren(){Object.keys(this.params).forEach(e=>{"body"!==e&&(this.elems[e]=this.body.querySelector(this.params[e].selector))},this)}recalcStyles(e,t){if(isMobile)return;const a=this.getRotateY(e),o=this.getRotateX(t);this.body.style.transform=`perspective(1000px) rotateX(${o}deg) rotateY(${a}deg)`}getRotateY(e){const t=Math.round(this.body.getBoundingClientRect().left+this.body.clientWidth/2);return e<t?-Math.floor((1-e/t)*this.params.body.maxRotateX):e===t?0:e>t?Math.floor((e-t)/(window.innerWidth-t)*this.params.body.maxRotateX):void 0}getRotateX(e){const t=Math.round(this.body.getBoundingClientRect().top+this.body.clientHeight/2);return e<t?Math.floor((1-e/t)*this.params.body.maxRotateY):e===t?0:e>t?-Math.floor((e-t)/(window.innerHeight-t)*this.params.body.maxRotateY):void 0}recalcStylesMobile(e,t){const a=-this.getRotateXMobile(e),o=this.getRotateXMobile(t);this.body.style.transform=`perspective(1000px) rotateX(${a}deg) rotateY(${o}deg)`}getRotateXMobile(e){const t=e/mobileRangeAngel*+this.params.body.maxRotateX;return Math.abs(t)>+this.params.body.maxRotateX?Math.sign(t)*+this.params.body.maxRotateX:t}getRotateYMobile(e){const t=e/mobileRangeAngel*+this.params.body.maxRotateY;return Math.abs(t)>+this.params.body.maxRotateX?Math.sign(t)*+this.params.body.maxRotateX:t}setElemsStyle(){for(let e in this.elems)this.elems.hasOwnProperty(e)&&(this.elems[e].style=`transform: perspective(${this.params.body.perspective}) translateZ(${this.params[e].maxZ});`)}}let cards=createCards(card);function moveHandler(e){isMobile||cards.forEach(t=>{t.recalcStyles(e.clientX,e.clientY)})}function createCards(e){const t=document.querySelectorAll(e.body.selector),a=[];return t.forEach(t=>{const o={...e};o.body.elem=t,a.push(new Card(o))}),a}function moveCardMobile(e){let[t,a]=window.innerHeight>window.innerWidth?[e.beta,e.gamma]:[-e.gamma,e.beta];""!==startDegrees.x&&""!==startDegrees.y&&0!==startDegrees.x||(startDegrees.x=t,startDegrees.y=a);const o=t-startDegrees.x,s=a-startDegrees.y;cards.forEach(e=>{e.recalcStylesMobile(o,s)})}isMobile?window.addEventListener("deviceorientation",moveCardMobile):window.addEventListener("mousemove",moveHandler);